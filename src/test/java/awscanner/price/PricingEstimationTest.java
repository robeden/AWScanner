package awscanner.price;

import org.junit.jupiter.api.Test;

import java.math.BigDecimal;

import static org.junit.jupiter.api.Assertions.*;


class PricingEstimationTest {
    @Test
    void name() {
        String test_for_parse = """
{"product":{"productFamily":"Compute Instance","attributes":{"enhancedNetworkingSupported":"Yes","intelTurboAvailable":"No","memory":"128 GiB","dedicatedEbsThroughput":"3500 Mbps","vcpu":"32","classicnetworkingsupport":"false","capacitystatus":"Used","locationType":"AWS Region","storage":"EBS only","instanceFamily":"General purpose","operatingSystem":"Linux","intelAvx2Available":"No","regionCode":"us-gov-west-1","physicalProcessor":"AMD EPYC 7571","clockSpeed":"2.5 GHz","ecu":"NA","networkPerformance":"Up to 10 Gigabit","servicename":"Amazon Elastic Compute Cloud","vpcnetworkingsupport":"true","instanceType":"m5a.8xlarge","tenancy":"Shared","usagetype":"UGW1-BoxUsage:m5a.8xlarge","normalizationSizeFactor":"64","intelAvxAvailable":"No","processorFeatures":"AVX; AVX2; AMD Turbo","servicecode":"AmazonEC2","licenseModel":"No License required","currentGeneration":"Yes","preInstalledSw":"NA","location":"AWS GovCloud (US-West)","processorArchitecture":"64-bit","marketoption":"OnDemand","operation":"RunInstances","availabilityzone":"NA"},"sku":"PR3XTEQYEMKGK56X"},"serviceCode":"AmazonEC2","terms":{"OnDemand":{"PR3XTEQYEMKGK56X.JRTCKXETXF":{"priceDimensions":{"PR3XTEQYEMKGK56X.JRTCKXETXF.6YS6EN2CT7":{"unit":"Hrs","endRange":"Inf","description":"$1.744 per On Demand Linux m5a.8xlarge Instance Hour","appliesTo":[],"rateCode":"PR3XTEQYEMKGK56X.JRTCKXETXF.6YS6EN2CT7","beginRange":"0","pricePerUnit":{"USD":"1.7440000000"}}},"sku":"PR3XTEQYEMKGK56X","effectiveDate":"2022-09-01T00:00:00Z","offerTermCode":"JRTCKXETXF","termAttributes":{}}},"Reserved":{"PR3XTEQYEMKGK56X.6QCMYABX3D":{"priceDimensions":{"PR3XTEQYEMKGK56X.6QCMYABX3D.2TG2D8R56U":{"unit":"Quantity","description":"Upfront Fee","appliesTo":[],"rateCode":"PR3XTEQYEMKGK56X.6QCMYABX3D.2TG2D8R56U","pricePerUnit":{"USD":"8983"}},"PR3XTEQYEMKGK56X.6QCMYABX3D.6YS6EN2CT7":{"unit":"Hrs","endRange":"Inf","description":"USD 0.0 per Linux/UNIX (Amazon VPC), m5a.8xlarge reserved instance applied","appliesTo":[],"rateCode":"PR3XTEQYEMKGK56X.6QCMYABX3D.6YS6EN2CT7","beginRange":"0","pricePerUnit":{"USD":"0.0000000000"}}},"sku":"PR3XTEQYEMKGK56X","effectiveDate":"2020-04-01T00:00:00Z","offerTermCode":"6QCMYABX3D","termAttributes":{"LeaseContractLength":"1yr","OfferingClass":"standard","PurchaseOption":"All Upfront"}},"PR3XTEQYEMKGK56X.HU7G6KETJZ":{"priceDimensions":{"PR3XTEQYEMKGK56X.HU7G6KETJZ.6YS6EN2CT7":{"unit":"Hrs","endRange":"Inf","description":"Linux/UNIX (Amazon VPC), m5a.8xlarge reserved instance applied","appliesTo":[],"rateCode":"PR3XTEQYEMKGK56X.HU7G6KETJZ.6YS6EN2CT7","beginRange":"0","pricePerUnit":{"USD":"0.5230000000"}},"PR3XTEQYEMKGK56X.HU7G6KETJZ.2TG2D8R56U":{"unit":"Quantity","description":"Upfront Fee","appliesTo":[],"rateCode":"PR3XTEQYEMKGK56X.HU7G6KETJZ.2TG2D8R56U","pricePerUnit":{"USD":"4583"}}},"sku":"PR3XTEQYEMKGK56X","effectiveDate":"2020-04-01T00:00:00Z","offerTermCode":"HU7G6KETJZ","termAttributes":{"LeaseContractLength":"1yr","OfferingClass":"standard","PurchaseOption":"Partial Upfront"}},"PR3XTEQYEMKGK56X.CUZHX8X6JH":{"priceDimensions":{"PR3XTEQYEMKGK56X.CUZHX8X6JH.2TG2D8R56U":{"unit":"Quantity","description":"Upfront Fee","appliesTo":[],"rateCode":"PR3XTEQYEMKGK56X.CUZHX8X6JH.2TG2D8R56U","pricePerUnit":{"USD":"5743"}},"PR3XTEQYEMKGK56X.CUZHX8X6JH.6YS6EN2CT7":{"unit":"Hrs","endRange":"Inf","description":"Linux/UNIX (Amazon VPC), m5a.8xlarge reserved instance applied","appliesTo":[],"rateCode":"PR3XTEQYEMKGK56X.CUZHX8X6JH.6YS6EN2CT7","beginRange":"0","pricePerUnit":{"USD":"0.6560000000"}}},"sku":"PR3XTEQYEMKGK56X","effectiveDate":"2019-06-01T00:00:00Z","offerTermCode":"CUZHX8X6JH","termAttributes":{"LeaseContractLength":"1yr","OfferingClass":"convertible","PurchaseOption":"Partial Upfront"}},"PR3XTEQYEMKGK56X.7NE97W5U4E":{"priceDimensions":{"PR3XTEQYEMKGK56X.7NE97W5U4E.6YS6EN2CT7":{"unit":"Hrs","endRange":"Inf","description":"Linux/UNIX (Amazon VPC), m5a.8xlarge reserved instance applied","appliesTo":[],"rateCode":"PR3XTEQYEMKGK56X.7NE97W5U4E.6YS6EN2CT7","beginRange":"0","pricePerUnit":{"USD":"1.3770000000"}}},"sku":"PR3XTEQYEMKGK56X","effectiveDate":"2019-06-01T00:00:00Z","offerTermCode":"7NE97W5U4E","termAttributes":{"LeaseContractLength":"1yr","OfferingClass":"convertible","PurchaseOption":"No Upfront"}},"PR3XTEQYEMKGK56X.38NPMPTW36":{"priceDimensions":{"PR3XTEQYEMKGK56X.38NPMPTW36.2TG2D8R56U":{"unit":"Quantity","description":"Upfront Fee","appliesTo":[],"rateCode":"PR3XTEQYEMKGK56X.38NPMPTW36.2TG2D8R56U","pricePerUnit":{"USD":"9166"}},"PR3XTEQYEMKGK56X.38NPMPTW36.6YS6EN2CT7":{"unit":"Hrs","endRange":"Inf","description":"Linux/UNIX (Amazon VPC), m5a.8xlarge reserved instance applied","appliesTo":[],"rateCode":"PR3XTEQYEMKGK56X.38NPMPTW36.6YS6EN2CT7","beginRange":"0","pricePerUnit":{"USD":"0.3490000000"}}},"sku":"PR3XTEQYEMKGK56X","effectiveDate":"2020-04-01T00:00:00Z","offerTermCode":"38NPMPTW36","termAttributes":{"LeaseContractLength":"3yr","OfferingClass":"standard","PurchaseOption":"Partial Upfront"}},"PR3XTEQYEMKGK56X.MZU6U2429S":{"priceDimensions":{"PR3XTEQYEMKGK56X.MZU6U2429S.2TG2D8R56U":{"unit":"Quantity","description":"Upfront Fee","appliesTo":[],"rateCode":"PR3XTEQYEMKGK56X.MZU6U2429S.2TG2D8R56U","pricePerUnit":{"USD":"21834"}},"PR3XTEQYEMKGK56X.MZU6U2429S.6YS6EN2CT7":{"unit":"Hrs","endRange":"Inf","description":"USD 0.0 per Linux/UNIX (Amazon VPC), m5a.8xlarge reserved instance applied","appliesTo":[],"rateCode":"PR3XTEQYEMKGK56X.MZU6U2429S.6YS6EN2CT7","beginRange":"0","pricePerUnit":{"USD":"0.0000000000"}}},"sku":"PR3XTEQYEMKGK56X","effectiveDate":"2019-06-01T00:00:00Z","offerTermCode":"MZU6U2429S","termAttributes":{"LeaseContractLength":"3yr","OfferingClass":"convertible","PurchaseOption":"All Upfront"}},"PR3XTEQYEMKGK56X.NQ3QZPMQV9":{"priceDimensions":{"PR3XTEQYEMKGK56X.NQ3QZPMQV9.6YS6EN2CT7":{"unit":"Hrs","endRange":"Inf","description":"USD 0.0 per Linux/UNIX (Amazon VPC), m5a.8xlarge reserved instance applied","appliesTo":[],"rateCode":"PR3XTEQYEMKGK56X.NQ3QZPMQV9.6YS6EN2CT7","beginRange":"0","pricePerUnit":{"USD":"0.0000000000"}},"PR3XTEQYEMKGK56X.NQ3QZPMQV9.2TG2D8R56U":{"unit":"Quantity","description":"Upfront Fee","appliesTo":[],"rateCode":"PR3XTEQYEMKGK56X.NQ3QZPMQV9.2TG2D8R56U","pricePerUnit":{"USD":"17233"}}},"sku":"PR3XTEQYEMKGK56X","effectiveDate":"2020-04-01T00:00:00Z","offerTermCode":"NQ3QZPMQV9","termAttributes":{"LeaseContractLength":"3yr","OfferingClass":"standard","PurchaseOption":"All Upfront"}},"PR3XTEQYEMKGK56X.BPH4J8HBKS":{"priceDimensions":{"PR3XTEQYEMKGK56X.BPH4J8HBKS.6YS6EN2CT7":{"unit":"Hrs","endRange":"Inf","description":"Linux/UNIX (Amazon VPC), m5a.8xlarge reserved instance applied","appliesTo":[],"rateCode":"PR3XTEQYEMKGK56X.BPH4J8HBKS.6YS6EN2CT7","beginRange":"0","pricePerUnit":{"USD":"0.7530000000"}}},"sku":"PR3XTEQYEMKGK56X","effectiveDate":"2020-04-01T00:00:00Z","offerTermCode":"BPH4J8HBKS","termAttributes":{"LeaseContractLength":"3yr","OfferingClass":"standard","PurchaseOption":"No Upfront"}},"PR3XTEQYEMKGK56X.R5XV2EPZQZ":{"priceDimensions":{"PR3XTEQYEMKGK56X.R5XV2EPZQZ.2TG2D8R56U":{"unit":"Quantity","description":"Upfront Fee","appliesTo":[],"rateCode":"PR3XTEQYEMKGK56X.R5XV2EPZQZ.2TG2D8R56U","pricePerUnit":{"USD":"11140"}},"PR3XTEQYEMKGK56X.R5XV2EPZQZ.6YS6EN2CT7":{"unit":"Hrs","endRange":"Inf","description":"Linux/UNIX (Amazon VPC), m5a.8xlarge reserved instance applied","appliesTo":[],"rateCode":"PR3XTEQYEMKGK56X.R5XV2EPZQZ.6YS6EN2CT7","beginRange":"0","pricePerUnit":{"USD":"0.4240000000"}}},"sku":"PR3XTEQYEMKGK56X","effectiveDate":"2019-06-01T00:00:00Z","offerTermCode":"R5XV2EPZQZ","termAttributes":{"LeaseContractLength":"3yr","OfferingClass":"convertible","PurchaseOption":"Partial Upfront"}},"PR3XTEQYEMKGK56X.VJWZNREJX2":{"priceDimensions":{"PR3XTEQYEMKGK56X.VJWZNREJX2.2TG2D8R56U":{"unit":"Quantity","description":"Upfront Fee","appliesTo":[],"rateCode":"PR3XTEQYEMKGK56X.VJWZNREJX2.2TG2D8R56U","pricePerUnit":{"USD":"11257"}},"PR3XTEQYEMKGK56X.VJWZNREJX2.6YS6EN2CT7":{"unit":"Hrs","endRange":"Inf","description":"USD 0.0 per Linux/UNIX (Amazon VPC), m5a.8xlarge reserved instance applied","appliesTo":[],"rateCode":"PR3XTEQYEMKGK56X.VJWZNREJX2.6YS6EN2CT7","beginRange":"0","pricePerUnit":{"USD":"0.0000000000"}}},"sku":"PR3XTEQYEMKGK56X","effectiveDate":"2019-06-01T00:00:00Z","offerTermCode":"VJWZNREJX2","termAttributes":{"LeaseContractLength":"1yr","OfferingClass":"convertible","PurchaseOption":"All Upfront"}},"PR3XTEQYEMKGK56X.4NA7Y494T4":{"priceDimensions":{"PR3XTEQYEMKGK56X.4NA7Y494T4.6YS6EN2CT7":{"unit":"Hrs","endRange":"Inf","description":"Linux/UNIX (Amazon VPC), m5a.8xlarge reserved instance applied","appliesTo":[],"rateCode":"PR3XTEQYEMKGK56X.4NA7Y494T4.6YS6EN2CT7","beginRange":"0","pricePerUnit":{"USD":"1.0990000000"}}},"sku":"PR3XTEQYEMKGK56X","effectiveDate":"2020-04-01T00:00:00Z","offerTermCode":"4NA7Y494T4","termAttributes":{"LeaseContractLength":"1yr","OfferingClass":"standard","PurchaseOption":"No Upfront"}},"PR3XTEQYEMKGK56X.Z2E3P23VKM":{"priceDimensions":{"PR3XTEQYEMKGK56X.Z2E3P23VKM.6YS6EN2CT7":{"unit":"Hrs","endRange":"Inf","description":"Linux/UNIX (Amazon VPC), m5a.8xlarge reserved instance applied","appliesTo":[],"rateCode":"PR3XTEQYEMKGK56X.Z2E3P23VKM.6YS6EN2CT7","beginRange":"0","pricePerUnit":{"USD":"0.9160000000"}}},"sku":"PR3XTEQYEMKGK56X","effectiveDate":"2019-06-01T00:00:00Z","offerTermCode":"Z2E3P23VKM","termAttributes":{"LeaseContractLength":"3yr","OfferingClass":"convertible","PurchaseOption":"No Upfront"}}}},"version":"20220912204201","publicationDate":"2022-09-12T20:42:01Z"}""";
        System.out.println(test_for_parse);
        assertEquals( new BigDecimal( "1.744" ),
            PricingEstimation.parsePrice( test_for_parse ).orElse( null ) );
    }
}
